import{_ as R,r as i,o as D,c as f,a as g,d as t,w as h,H as B,b as _,u as a,t as n,i as l,e as L,F as S,f as x,g as N,h as m}from"./index-yY84Eh2A.js";const V={key:0,class:"team-card"},j={class:"head-container"},z=["src"],A=["filled"],I={class:"team-stats"},M={class:"team-stats"},H={key:0},O={key:1},G={key:1},p="https://csci-430-server-dubbabadgmf8hpfk.eastus2-01.azurewebsites.net",J={__name:"TeamComponent",props:{id:String},setup(w){const v=w,u=i(""),c=i(""),k=i(!1),d=i(!1),T=i(localStorage.getItem("token"));let o=i(null);async function $(s,e){if(!e){u.value=`Invalid ${s} ID!`;return}k.value=!0,u.value="";try{const r=await fetch(`${p}/${s}/${e}`);if(!r.ok)throw new Error(`${s} not found.`);let y=await r.json();o.value=y}catch(r){u.value=r.message}finally{k.value=!1}}function b(){fetch(`${p}/favorite-teams`,{method:"GET",headers:{Authorization:`Bearer ${T.value}`}}).then(async s=>{if(!s.ok)throw new Error("Failed to add team to favorites");let e=await s.json();console.log("list",e.favoriteTeams,v.id,e.favoriteTeams.includes(v.id)),e.favoriteTeams.includes(v.id.toString())&&(d.value=!0)}).catch(s=>alert(s.message))}function C(s){fetch(`${p}/favorite-teams`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T.value}`},body:JSON.stringify({team_id:s})}).then(e=>{if(!e.ok)throw new Error("Failed to add team to favorites");d.value=!0,c.value="Team favorited successfully!",console.log("Team favorited successfully!")}).catch(e=>alert(e.message))}function F(s){fetch(`${p}/favorite-teams/${s}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T.value}`}}).then(e=>{if(!e.ok)throw new Error("Failed to remove team from favorites");d.value=!1,c.value="Team removed from favorites successfully!",console.log("Team removed from favorites successfully!")}).catch(e=>alert(e.message))}D(()=>{$("teams",v.id),b()});const E=x();return(s,e)=>{const r=N("RouterLink");return m(),f(S,null,[g(B,null,{default:h(()=>[t("nav",null,[g(r,null,{default:h(()=>[t("button",{onClick:e[0]||(e[0]=y=>a(E).back())},"Back")]),_:1}),g(r,{to:"/favorites"},{default:h(()=>e[2]||(e[2]=[t("button",null,"Favorites",-1)])),_:1})])]),_:1}),t("main",null,[t("div",null,[a(o)?(m(),f("div",V,[t("div",j,[t("div",null,[t("h1",null,n(a(o).team.full_name),1),t("p",null,[e[3]||(e[3]=t("strong",null,"City:",-1)),l(" "+n(a(o).team.city),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"Abbreviation:",-1)),l(" "+n(a(o).team.abbreviation),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"Conference:",-1)),l(" "+n(a(o).team.conference),1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"Division:",-1)),l(" "+n(a(o).team.division),1)])]),t("div",null,[t("img",{src:`/Team logo pngs/${a(o).team.full_name}.png`,alt:"Team Logo",style:{width:"80%"}},null,8,z)])]),t("button",{class:"favorite-btn",onClick:e[1]||(e[1]=y=>d.value?F(a(o).team.id):C(a(o).team.id))},[t("div",{class:"icon",filled:d.value},"star",8,A)]),t("div",I,[e[9]||(e[9]=t("h2",null,"Rank",-1)),t("p",null,[e[7]||(e[7]=t("strong",null,"Conference Rank:",-1)),l(" "+n(a(o).standings.conference_rank),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"Division Rank:",-1)),l(" "+n(a(o).standings.division_rank),1)])]),t("div",M,[e[12]||(e[12]=t("h2",null,"Record",-1)),t("p",null,[e[10]||(e[10]=t("strong",null,"Conference Record:",-1)),l(" "+n(a(o).standings.conference_record),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Division Record:",-1)),l(" "+n(a(o).standings.division_record),1)])]),u.value?(m(),f("p",H,n(u.value),1)):c.value?(m(),f("p",O,n(c.value),1)):_("",!0)])):k.value?(m(),f("p",G,"Loading team details...")):_("",!0)])]),g(L)],64)}}},U=R(J,[["__scopeId","data-v-dd19f44f"]]);export{U as default};
